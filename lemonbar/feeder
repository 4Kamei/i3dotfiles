#!/bin/bash

GetDate() {
 	DATE=$(date "+%Y/%m/%d %_H:%M:%S")
	echo -n "$DATE"
}
GetWorkspaces() {
  workspace_list=""
  i3_next="i3-msg workspace next_on_output, exec echo_ws"
  i3_prev="i3-msg workspace prev_on_output, exec echo_ws"

  while read -r workspace; do
      ws="${workspace/* }"
      case "$workspace" in
      *"*"*) workspace_list+="  %{F#f3f4f5}$ws  %{F#676e7d}"
      ;;
          *) workspace_list+="%{A:i3-msg workspace ${ws}:}%{F#676e7d}  $ws  %{A}%{F#676e7d}" ;;
      esac
  done < <(wmctrl -d)
  output="%{A4:${i3_next}:}%{A5:${i3_prev}:}${workspace_list}%{A}%{A}"
  echo "$output"
}

while true; do
	echo "$(GetWorkspaces)"
	sleep
done
